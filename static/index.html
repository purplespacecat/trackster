<!DOCTYPE html>
<html>
<head>
    <title>Baby Tracker Test</title>
    <style>
        body {
            font-family: system-ui;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px 5px;
            cursor: pointer;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 5px;
        }
        input {
            padding: 10px;
            font-size: 16px;
            width: 300px;
        }
    </style>
</head>
<body>
    <h1>Baby Tracker - Test Page</h1>
    
    <!-- Test GET endpoint -->
    <button onclick="getHello()">Get Hello Arnold</button>
    
    <!-- Test POST endpoint -->
    <input type="text" id="messageInput" placeholder="Type a message...">
    <button onclick="postMessage()">Send Message</button>
    
    <!-- Show all messages -->
    <button onclick="getMessages()">Show All Messages</button>
    
    <!-- Display results -->
    <div id="result"></div>

    <script>
        // GET request - fetch "Hello Arnold"
        async function getHello() {
            const response = await fetch('/hello');
            const data = await response.json();
            document.getElementById('result').innerHTML = 
                `<strong>GET /hello:</strong><br>${data.message}`;
        }
        
        // POST request - send message
        async function postMessage() {
            const text = document.getElementById('messageInput').value;
            
            const response = await fetch('/message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ text: text })
            });
            
            const data = await response.json();
            document.getElementById('result').innerHTML = 
                `<strong>POST /message:</strong><br>
                 Received: ${data.received}<br>
                 Total messages: ${data.total_messages}`;
            
            // Clear input
            document.getElementById('messageInput').value = '';
        }
        
        // GET all messages
        async function getMessages() {
            const response = await fetch('/messages');
            const data = await response.json();
            
            const messageList = data.messages
                .map((msg, i) => `${i + 1}. ${msg}`)
                .join('<br>');
            
            document.getElementById('result').innerHTML = 
                `<strong>All Messages:</strong><br>${messageList || 'No messages yet'}`;
        }
    </script>
</body>
</html>
